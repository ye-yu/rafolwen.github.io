<!DOCTYPE html>

<meta name="title" content="raflie.com | Python list stream" />
<meta name="description" content="Inspired by Java Streams util, I built a similar utility class that is lightweight and has less lines of code" />
<meta name="keywords" content="python,stream,gist" />
<meta name="robots" content="index, follow" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="language" content="English" />
<meta name="revisit-after" content="30 days" />
<meta name="author" content="Raflie Zainuddin <rafolwen98@gmail.com>" />

<head>
  <link rel="stylesheet" href="index.css" />
  <title>raflie.com | Python list stream</title>
</head>

<style>
  .header-container {
    flex-shrink: 0;
    flex-grow: 0;
    flex-basis: 400px;
    background: #313131;
    min-height: 100dvh;
    min-height: 100vh;
  }

  .header-content {
    padding-top: 24px;
    padding-right: 32px;
    padding-bottom: 24px;
    padding-left: 92px;
  }

  .content-container {
    flex: 1;
    height: 100dvh;
    height: 100vh;
    overflow-y: auto;
    background-color: #bbb7b7;
    color: #333;
  }

  .content-content {
    padding: 64px 72px;
    max-width: 700px;
    margin: auto;
  }

  .blog-title {
    font-weight: 700;
    font-size: 32px;
    letter-spacing: 1px;
  }

  .blog-timestamp {
    color: #665;
  }

  @media (max-width: 768px) {
    .header-container {
      flex: 1;
      background: #313131;
      min-height: unset;
      min-height: unset;
    }

    .header-content {
      padding: 32px 40px;
    }

    .content-container {
      height: unset;
      height: unset;
    }

    .content-content {
      padding: 40px;
    }
  }
</style>

<body>
  <div class="flex-row md-flex-col">
    <div class="flex-col header-container">
      <div class="flex-col header-content" style="gap: 24px">
        <div style="padding-top: 60px"></div>
        <div style="letter-spacing: 1px; padding-bottom: 12px">
          <a
            href="https://raflie.com/#"
            style="font-size: 24px; font-weight: 700; color: white"
            >Raflie Zainuddin</a
          >
        </div>
        <div style="color: #cccccc; font-size: 16px; font-weight: 400">
          Welcome to my page.
        </div>
        <div style="color: #cccccc; font-size: 16px; font-weight: 400">
          I am Raflie Zainuddin, and I like experimenting with
          <span style="color: white; font-weight: 700">JavaScript</span> and
          <span style="color: white; font-weight: 700">TypeScript</span>.
        </div>
        <div style="color: #cccccc; font-size: 16px; font-weight: 400">
          On my website, I enjoy sharing how I leverage functionalities of the
          programming languages to create useful hacks and tricks. Hopefully,
          these insights can help you enhance and streamline your own projects.
        </div>

        <div style="display: flex; margin-top: 32px; gap: 8px">
          <div style="background-color: #1a1a1a; border-radius: 999px">
            <a
              href="https://github.com/ye-yu"
              style="
                display: flex;
                align-items: center;
                justify-content: center;
                width: 40px;
                height: 40px;
              "
            >
              <svg
                style="stroke: white"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-github"
              >
                <path
                  d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"
                ></path>
              </svg>
            </a>
          </div>

          <div style="background-color: white; border-radius: 999px">
            <a
              href="https://linkedin.com/in/raflie"
              style="
                display: flex;
                align-items: center;
                justify-content: center;
                min-width: 40px;
                height: 40px;
                gap: 8px;
              "
            >
              <svg
                style="stroke: black"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-linkedin"
              >
                <path
                  d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"
                ></path>
                <rect x="2" y="9" width="4" height="12"></rect>
                <circle cx="4" cy="4" r="2"></circle>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="content-container">
      <div class="flex-col content-content" style="gap: 40px">
        <div class="flex-col" name="blog-container" style="gap: 24px">
  <div class="flex-col" name="blog-header">
    <div class="blog-title">
      <span style="padding-right: 8px">
        <img src="assets/link.svg" alt="link" />
      </span>
      <a href="001-2023_05_00_python_list_stream.html" style="color: #333; font-weight: 700">
        Python list stream
      </a>
    </div>
    <div class="blog-timestamp">2023 May 1st &bull; 3min read time</div>
  </div>
  <div class="divider"></div>
  <div class="flex-col" name="blog-content"><h2>Python List Stream</h2>
<p>(<a href="https://gist.github.com/ye-yu/26d6806ceb1f7b0712763a1ce6bdac29">Related code snippet</a>)</p>
<p>I did some data engineering tasks during the duration of my internship, and I was introduced to the data stream from Spark. I was amazed on how clean and easily-read the code became when using stream instead of using for-loop. In fact, the semantic of stream has always been a part of the Java library through their stream API.</p>
<p>In Python, there is a feature called a list comprehension. We can easily create a list and perform various actions such as filter, map, and so on.</p>
<pre><code class="hljs language-python">a = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)] <span class="hljs-comment"># creates [0, 1, 2, 3, 4]</span>
b = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> a <span class="hljs-keyword">if</span> is_prime(i)] <span class="hljs-comment"># creates [2, 3]</span>

<span class="hljs-comment"># one line</span>
c = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>) <span class="hljs-keyword">if</span> is_prime(i)]
</code></pre><p>The disadvantage of this is that it gets too cluttered together when putting the too many operations in one line. In Java, the same operation can be neatly written using <code>IntStream</code>.</p>
<pre><code class="hljs language-java"><span class="hljs-comment">// NumberClass is a custom class</span>
IntStream.range(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>).filter(NumberClass::isPrime).toArray()
</code></pre><p>A similar implementation can be done on python by utilising the built-in <code>filter</code> and <code>map</code> functions. In the my <a href="https://gist.github.com/ye-yu/26d6806ceb1f7b0712763a1ce6bdac29">code snippet</a>, I wrap an iterable into <code>iter()</code> function and store it as the instance iterable field. By using the filter function, the iterable is passed into the built-in filter function, and the new iterable is set as current iterable. When the <code>collect</code> method is called, the current iterable is the same as</p>
<pre><code class="hljs language-python"><span class="hljs-built_in">filter</span>(some_function, <span class="hljs-built_in">iter</span>(the_original_iterable))
</code></pre><p>, and this will be passed into <code>list</code> to create a new list.</p>
<p>The advantage of stream is that the collect operation can be postponed and all operations can be made dynamic.</p>
<pre><code class="hljs language-python">stream = Stream.of(...)
<span class="hljs-comment"># some codes here</span>
<span class="hljs-keyword">if</span> (...):
  stream = stream.<span class="hljs-built_in">map</span>(...).<span class="hljs-built_in">filter</span>(...)
<span class="hljs-keyword">while</span>(...):
  stream = stream.<span class="hljs-built_in">map</span>(...)
<span class="hljs-comment"># some more codes here</span>
result = stream.collect() <span class="hljs-comment"># consume the stream here</span>
</code></pre></div>
</div>

      </div>
    </div>
  </div>
</body>

<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css"
/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/typescript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>

<style>
  .hljs {
    border-radius: 4px;
    background-color: #afacac;
  }
</style>
